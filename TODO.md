## План: управление сессиями/контролем (переписать под требуемый алгоритм)

Алгоритм должен работать так (эти же кейсы проверяют тесты `session-control*`):

1. **Автозахват только один раз в `initSession()`**, и только если сервер вернул, что контроллера нет.
2. **Если сервер вернул, что контроллер уже есть** — в `initSession()` управление блокируется, UI генерирует новый токен сессии (сбрасывает старый), автоклейма нет. Дальше только кнопка «Забрать управление».
3. **При одновременном захвате** (свободное управление или просроченный keepalive) сервер гарантирует успех только первому; остальные получают ошибку (409/403).
4. **На периодических `refresh`**, если сервер возвращает, что управление свободно, UI лишь показывает кнопку «Забрать управление»; забрать может только пользователь явным кликом (никакого авто-claim). Если сервер говорит, что контроллер — наш токен, управление остаётся у нас.

Задачи:
- [x] Исправить UI/бекенд под правила 1–4.
- [x] Обновить Playwright-тесты `session-control*`, убедиться, что все зелёные.
- [ ] Обновить документацию (DOCS/README/details) с новым алгоритмом.

Дополнительно:
- [ ] Перенести хранение сессионного токена с `localStorage` на `sessionStorage` (изоляция вкладок); обновить UI и `tests/utils.ts`, прогнать тесты.
- [ ] Расширить диагностику: опциональный лог сетевого обмена, лог действий/запросов/ответов (с обрезкой строк).
- [ ] Выравнять таймауты Playwright до 10s (кроме заведомо долгих), добить сценарии рабочего списка и управления.
